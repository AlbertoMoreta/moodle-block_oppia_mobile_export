
<div class="wrap-collabsible">
    <input id="collapsible" class="toggle" type="checkbox">
    <label for="collapsible" class="lbl-toggle">Feedback 1</label>
    <div class="collapsible-content">
        <div class="content-inner">
            <div class="quizzes-table">
                <div class="pure-g titles">
                    <div class="pure-u-4-24">Grade</div>
                    <div class="pure-u-2-24"></div>
                    <div class="pure-u-16-24">Message</div>
                    <div class="pure-u-2-24"></div>
                </div>

                <div id="main-row" class="pure-g grade-boundary-row">
                    <div class="pure-u-lg-4-24 pure-u-sm-1-2 pure-u-1">
                        100%
                    </div>
                    <button type="button" class="pure-u-lg-2-24 add-row">+</button>
                    <div class="pure-u-lg-16-24 quiz-title">
                        <input>
                    </div>
                </div>

                <div class="pure-g grade-boundary-row">
                    <div class="pure-u-lg-4-24 pure-u-sm-1-2 pure-u-1">
                        >= 0%
                    </div>
                    <div class="pure-u-lg-16-24 quiz-title">
                        <input>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="wrap-collabsible">
    <input id="collapsible2" class="toggle" type="checkbox">
    <label for="collapsible2" class="lbl-toggle">Feedback 2</label>
    <div class="collapsible-content">
        <div class="content-inner">
            <p>
                QUnit is by calling one of the object that are embedded in JavaScript, and faster JavaScript program could also used with
                its elegant, well documented, and functional programming using JS, HTML pages Modernizr is a popular browsers without
                plug-ins. Test-Driven Development.
            </p>
        </div>
    </div>
</div>

<script type="module">

    import Mustache from '../js/mustache.js';
    console.log(Mustache);

    let row_count = 0;

    function add_row(e) {
        row_count++;
        console.log("button clicked");
        var btn = e.target;
        var new_row = document.createElement("div");
        new_row.className = "pure-g grade-boundary-row";
        fetch('../templates/grade_boundary_extra_row.mustache')
                .then((response) => response.text())
                .then((template) => {
                    new_row.innerHTML = Mustache.render(template, {id: row_count });
                    var add_btn = document.getElementById('add-row-' + row_count);
                    add_btn.addEventListener('click', add_row);

                    var remove_btn = document.getElementById('remove-row-' + row_count);
                    remove_btn.addEventListener('click', remove_row);
                });
        btn.parentNode.parentNode.insertBefore(new_row, btn.parentNode.nextSibling);
    }

    document.querySelectorAll('.add-row').forEach(occurence => {
        occurence.addEventListener('click', (e) => {
            add_row(e);
        });
    });

    export function remove_row() {
        return this.parentNode.remove();
    }


</script>


